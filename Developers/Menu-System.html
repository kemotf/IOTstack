
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker stack for getting started on IOT on the Raspberry PI">
      
      
      
      
        <link rel="prev" href="Git-Setup.html">
      
      
        <link rel="next" href="PostBuild-Script.html">
      
      
      <link rel="icon" href="../stack-24.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Menu system - IOTstack</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#menu-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="IOTstack" class="md-header__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.063 1.456a1.75 1.75 0 0 1 1.874 0l8.383 5.316a1.75 1.75 0 0 1 0 2.956l-8.383 5.316a1.75 1.75 0 0 1-1.874 0L2.68 9.728a1.75 1.75 0 0 1 0-2.956Zm1.071 1.267a.25.25 0 0 0-.268 0L3.483 8.039a.25.25 0 0 0 0 .422l8.383 5.316a.25.25 0 0 0 .268 0l8.383-5.316a.25.25 0 0 0 0-.422Z"/><path d="M1.867 12.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/><path d="M1.867 16.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IOTstack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Menu system
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SensorsIot/IOTstack" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SensorsIot/IOTstack
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Basic_setup/index.html" class="md-tabs__link">
          
  
  
  Basic setup

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Containers/AdGuardHome.html" class="md-tabs__link">
          
  
  
  Containers

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
  
  Developers

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Updates/index.html" class="md-tabs__link">
          
  
  
  Updates

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="IOTstack" class="md-nav__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.063 1.456a1.75 1.75 0 0 1 1.874 0l8.383 5.316a1.75 1.75 0 0 1 0 2.956l-8.383 5.316a1.75 1.75 0 0 1-1.874 0L2.68 9.728a1.75 1.75 0 0 1 0-2.956Zm1.071 1.267a.25.25 0 0 0-.268 0L3.483 8.039a.25.25 0 0 0 0 .422l8.383 5.316a.25.25 0 0 0 .268 0l8.383-5.316a.25.25 0 0 0 0-.422Z"/><path d="M1.867 12.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/><path d="M1.867 16.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/></svg>

    </a>
    IOTstack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SensorsIot/IOTstack" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SensorsIot/IOTstack
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basic setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Basic setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Accessing-your-Device-from-the-internet.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing your device from the internet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Backup-and-Restore.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backing up and restoring IOTstack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Custom.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom overrides
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Default-Configs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Default ports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Menu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Menu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Networking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Troubleshooting.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/Understanding-Containers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is Docker?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic_setup/What-is-sudo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is sudo?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Containers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/AdGuardHome.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AdGuard Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Adminer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adminer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Blynk_server.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blynk server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Chronograf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chronograf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/DashMachine.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DashMachine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Deconz.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deCONZ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/DiyHue.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DIY hue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Domoticz.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Domoticz
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Dozzle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dozzle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Duckdns.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duck DNS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/ESPHome.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ESPHome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/EspruinoHub.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Espruinohub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Gitea.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitea
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Grafana.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grafana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Heimdall.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Heimdall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Home-Assistant.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home Assistant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Homebridge.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homebridge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Homer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/InfluxDB.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InfluxDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/InfluxDB2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InfluxDB 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Kapacitor.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kapacitor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/MJPEG-Streamer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Motion JPEG Streamer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/MariaDB.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MariaDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Mosquitto.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mosquitto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/MotionEye.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MotionEye
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/NextCloud.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nextcloud
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Node-RED.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node-RED
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Octoprint.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Octoprint
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/OpenHab.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openHAB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/PgAdmin4.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pgAdmin4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Pi-hole.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pi-hole
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Plex.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Portainer-agent.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Portainer agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Portainer-ce.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Portainer CE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/PostgreSQL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Prometheus.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Python.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/RTL_433-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RTL_433 Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Ring-MQTT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ring-MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Scrypted.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scrypted
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Syncthing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Syncthing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/TasmoAdmin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TasmoAdmin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Telegraf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telegraf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Timescaledb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timescaledb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/WireGuard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WireGuard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/WordPress.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WordPress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/X2go.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    x2go
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/ZeroTier-vs-WireGuard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZeroTier vs WireGuard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/ZeroTier.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZeroTier
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Zigbee2MQTT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee2MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Containers/Zigbee2mqttassistant.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee2Mqtt Assistant
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Developers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="BuildStack-RandomPassword.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Stack Random Services Password
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="BuildStack-Services.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Stack Services system
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Git-Setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Menu system
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Menu-System.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Menu system
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#menu-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Menu Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Menu Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#injecting-and-getting-globals-in-a-child-script" class="md-nav__link">
    <span class="md-ellipsis">
      Injecting and getting globals in a child script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-and-writing-global-variables-in-a-child-script" class="md-nav__link">
    <span class="md-ellipsis">
      Reading and writing global variables in a child script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimisations" class="md-nav__link">
    <span class="md-ellipsis">
      Optimisations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environments-and-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Environments and encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sub-menus" class="md-nav__link">
    <span class="md-ellipsis">
      Sub-Menus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-stack-menu" class="md-nav__link">
    <span class="md-ellipsis">
      Build Stack Menu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Stack Menu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading" class="md-nav__link">
    <span class="md-ellipsis">
      Loading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selection-and-deselection" class="md-nav__link">
    <span class="md-ellipsis">
      Selection and deselection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-for-options-submenus-of-services" class="md-nav__link">
    <span class="md-ellipsis">
      Check for options (submenus of services)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-for-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Check for issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prebuild-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Prebuild hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postbuild-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Postbuild hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-build-process" class="md-nav__link">
    <span class="md-ellipsis">
      The build process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="PostBuild-Script.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Postbuild BASH Script
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Updates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Updates/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating the project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Updates/Changelog.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Updates/New-Menu-Release-Notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    New IOTstack Menu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Updates/gcgarner-migration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating from gcgarner to SensorsIot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Updates/migration-network-change.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration: network change
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#menu-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Menu Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Menu Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#injecting-and-getting-globals-in-a-child-script" class="md-nav__link">
    <span class="md-ellipsis">
      Injecting and getting globals in a child script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-and-writing-global-variables-in-a-child-script" class="md-nav__link">
    <span class="md-ellipsis">
      Reading and writing global variables in a child script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimisations" class="md-nav__link">
    <span class="md-ellipsis">
      Optimisations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environments-and-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Environments and encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sub-menus" class="md-nav__link">
    <span class="md-ellipsis">
      Sub-Menus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-stack-menu" class="md-nav__link">
    <span class="md-ellipsis">
      Build Stack Menu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Stack Menu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading" class="md-nav__link">
    <span class="md-ellipsis">
      Loading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selection-and-deselection" class="md-nav__link">
    <span class="md-ellipsis">
      Selection and deselection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-for-options-submenus-of-services" class="md-nav__link">
    <span class="md-ellipsis">
      Check for options (submenus of services)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-for-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Check for issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prebuild-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Prebuild hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postbuild-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Postbuild hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-build-process" class="md-nav__link">
    <span class="md-ellipsis">
      The build process
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="menu-system">Menu system<a class="headerlink" href="#menu-system" title="Permanent link">&para;</a></h1>
<p>This page explains how the menu system works for developers.</p>
<h2 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h2>
<p>Originally this script was written in bash. After a while it became obvious that bash wasn't well suited to dealing with all the different types of configuration files, and logic that goes with configuring everything. IOTstack needs to be accessible to all levels of programmers and tinkerers, not just ones experienced with Linux and bash. For this reason, it was rewritten in Python since the language syntax is easier to understand, and is more commonly used for scripting and programming than bash. Bash is still used in IOTstack where it makes sense to use it, but the menu system itself uses Python. The code it self while not being the most well structured or efficient, was intentionally made that way so that beginners and experienced programmers could contribute to the project. We are always open to improvements if you have suggestions.</p>
<h2 id="menu-structure">Menu Structure<a class="headerlink" href="#menu-structure" title="Permanent link">&para;</a></h2>
<p>Each screen of the menu is its own Python script. You can find most of these in the <code>./scripts</code> directory. When you select an item from the menu, and it changes screens, it actually dynamically loads and executes that Python script. It passes data as required by placing it into the global variable space so that both the child and the parent script can access it.</p>
<h3 id="injecting-and-getting-globals-in-a-child-script">Injecting and getting globals in a child script<a class="headerlink" href="#injecting-and-getting-globals-in-a-child-script" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code>with open(childPythonScriptPath, &quot;rb&quot;) as pythonDynamicImportFile:
  code = compile(pythonDynamicImportFile.read(), childPythonScriptPath, &quot;exec&quot;)
execGlobals = {
  &quot;globalKeyName&quot;: &quot;globalKeyValue&quot;
}
execLocals = {}
print(globalKeyName) # Will print out &#39;globalKeyValue&#39;
exec(code, execGlobals, execLocals)
print(globalKeyName) # Will print out &#39;newValue&#39;
</code></pre></div>
<h3 id="reading-and-writing-global-variables-in-a-child-script">Reading and writing global variables in a child script<a class="headerlink" href="#reading-and-writing-global-variables-in-a-child-script" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code>def someFunction:
  global globalKeyName
  print(globalKeyName) # Will print out &#39;globalKeyValue&#39;
  globalKeyName = &quot;newValue&quot;
</code></pre></div>
<p>Each menu is its own python executable. The entry point is down the bottom of the file wrapped in a <code>main()</code> function to prevent variable scope creep.</p>
<p>The code at the bottom of the <code>main()</code> function:
<div class="language-text highlight"><pre><span></span><code>if __name__ == &#39;builtins&#39;:
</code></pre></div></p>
<p>Is actually where the execution path runs, all the code above it is just declared so that it can be called without ordering or scope issues.</p>
<h3 id="optimisations">Optimisations<a class="headerlink" href="#optimisations" title="Permanent link">&para;</a></h3>
<p>It was obvious early on that the menu system would be slow on lower end devices, such as the Raspberry Pi, especially if it were rending a 4k terminal screen from a desktop via SSH. To mitigate this issue, not all of the screen is redrawn when there is a change. A "Hotzone" as it's called in the code, is usually rerendered when there's a change (such as pressing up or down to change an item selection, but not when scrolling). Full screen redraws are expensive and are only used when required, for example, when scrolling the pagination, selecting or deselecting a service, expanding or collapsing the menu and so on.</p>
<h3 id="environments-and-encoding">Environments and encoding<a class="headerlink" href="#environments-and-encoding" title="Permanent link">&para;</a></h3>
<p>At the very beginning of the main menu screen (<code>./scripts/main_menu.py</code>) the function <code>checkRenderOptions()</code> is run to determine what characters can be displayed on the screen. It will try various character sets, and eventually default to ASCII if none of the fancier stuff can be rendered. This setting is passed into of the sub menus through the submenu's global variables so that they don't have to recheck when they load.</p>
<h3 id="sub-menus">Sub-Menus<a class="headerlink" href="#sub-menus" title="Permanent link">&para;</a></h3>
<p>From the main screen, you will see several sections leading to various submenus. Most of these menus work in the same way as the main menu. The only exception to this rule is the Build Stack menu, which is probably the most complex part of IOTstack.</p>
<h2 id="build-stack-menu">Build Stack Menu<a class="headerlink" href="#build-stack-menu" title="Permanent link">&para;</a></h2>
<p>Path: <code>./scripts/buildstack_menu.py</code></p>
<h3 id="loading">Loading<a class="headerlink" href="#loading" title="Permanent link">&para;</a></h3>
<ol>
<li>Upon loading, the Build Stack menu will get a list of folders inside the <code>./templates</code> directory and check for a <code>build.py</code> file inside each of them. This can be seen in the <code>generateTemplateList()</code> function, which is executed before the first rendering happens.</li>
<li>The menu will then check if the file <code>./services/docker-compose.save.yml</code> exists. This file is used to save the configuration of the last build. This happens in the <code>loadCurrentConfigs()</code> function. It is important that the service name in the compose file matches the folder name, any service that doesn't will either cause an error, or won't be loaded into the menu.</li>
<li>If a previous build did exist the menu will then run the <code>prepareMenuState()</code> function that basically checks which items should be ticked, and check for any issues with the ticked items by running <code>checkForIssues()</code>.</li>
</ol>
<h3 id="selection-and-deselection">Selection and deselection<a class="headerlink" href="#selection-and-deselection" title="Permanent link">&para;</a></h3>
<p>When an item is selected, 3 things happen:
1. Update the UI variable (<code>menu</code>) with function <code>checkMenuItem(selectionIndex)</code> to let the user know the current state.
2. Update the array holding every checked item <code>setCheckedMenuItems()</code>. It uses the UI variable (<code>menu</code>) to know which items are set.
3. Check for any issues with the new list of selected items by running <code>checkForIssues()</code>.</p>
<h3 id="check-for-options-submenus-of-services">Check for options (submenus of services)<a class="headerlink" href="#check-for-options-submenus-of-services" title="Permanent link">&para;</a></h3>
<p>During a full render sequence (this is not a hotzone render), the build stack menu checks to see if each of the services has an options menu. It does this by executing the <code>build.py</code> script of each of the services and passing in <code>checkForOptionsHook</code> into the <code>toRun</code> global variable property to see if the script has a <code>runOptionsMenu</code> function. If the service's function result is true, without error, then the options text will appear up for that menu item.</p>
<h3 id="check-for-issues">Check for issues<a class="headerlink" href="#check-for-issues" title="Permanent link">&para;</a></h3>
<p>When a service is selected or deselected on the menu, the <code>checkForIssues()</code> function is run. This function iterates through each of the selected menu items' folders executing the <code>build.py</code> script and passing in <code>checkForRunChecksHook</code> into the <code>toRun</code> global variable property to see if the script has a <code>runChecks</code> function. The <code>runChecks</code> function is different depending on the service, since each service has its own requirements. Generally though, the <code>runChecks</code> function should check for conflicting port conflicts again any of the other services that are enabled. The menu will still allow you to build the stack, even if issues are present, assumine there's no errors raised during the build process.</p>
<h3 id="prebuild-hook">Prebuild hook<a class="headerlink" href="#prebuild-hook" title="Permanent link">&para;</a></h3>
<p>Pressing enter on the Build Stack menu kicks off the build process. The Build Stack menu will execute the <code>runPrebuildHook()</code> function. This function iterates through each of the selected menu items' folders executing the <code>build.py</code> script and passing in <code>checkForPreBuildHook</code> into the <code>toRun</code> global variable property to see if the script has a <code>preBuild</code> function. The <code>preBuild</code> function is different depending on the service, since each service has its own requirements. Some services may not even use the prebuild hook. The prebuild is very useful for setting up the services' configuration however. For example, it can be used to autogenerate a password for a paticular service, or copy and modify a configuration file from the <code>./.templates</code> directory into the <code>./services</code> or <code>./volumes</code> directory.</p>
<h3 id="postbuild-hook">Postbuild hook<a class="headerlink" href="#postbuild-hook" title="Permanent link">&para;</a></h3>
<p>The Build Stack menu will execute the <code>runPostBuildHook()</code> function in the final step of the build process, after the <code>docker-compose.yml</code> file has been written to disk. This function iterates through each of the selected menu items' folders executing the <code>build.py</code> script and passing in <code>checkForPostBuildHook</code> into the <code>toRun</code> global variable property to see if the script has a <code>postBuild</code> function. The <code>postBuild</code> function is different depending on the service, since each service has its own requirements. Most services won't require this function, but it can be useful for cleaning up temporary files and so on.</p>
<h3 id="the-build-process">The build process<a class="headerlink" href="#the-build-process" title="Permanent link">&para;</a></h3>
<p>The selected services' yaml configuration is already loaded into memory before the build stack process is started.</p>
<ol>
<li>Run prebuildHooks.</li>
<li>Read <code>./.templates/docker-compose-base.yml</code> file into a in memory yaml structure.</li>
<li>Add selected services into the in memory structure.</li>
<li>If it exists merge the <code>./compose-override.yml</code> file into memory</li>
<li>Write the in memory yaml structure to disk <code>./docker-compose.yml</code>.</li>
<li>Run postbuildHooks.</li>
<li>Run <code>postbuild.sh</code> if it exists, with the list of services built.</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "tabs", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../javascript/fix-codeblock-console-copy-button.js"></script>
      
    
  </body>
</html>